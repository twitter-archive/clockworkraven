-# Copyright 2012 Twitter, Inc. and others.
-#
-# Licensed under the Apache License, Version 2.0 (the "License");
-# you may not use this file except in compliance with the License.
-# You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.

%b Search Query:
%a{:target => '_blank', :href => "https://twitter.com/search?q=#{url_encode(data['query'])}"}= data['query']

- require_header :twitter_timelines do
  %script{:type => 'text/javascript', :src => '//widgets.twimg.com/j/2/widget.js', :charset => 'utf-8'}

%script{:type => 'text/javascript'}
  :plain
    new TWTR.Widget({
      version: 2,
      type: 'search',
      search: "#{u data['query']}",
      interval: 30000,
      subject: "#{data['query']}",
      width: "500",
      height: "200",
      rpp: 10,
      theme: {
        shell: {
          background: '#8ec1da',
          color: '#ffffff'
        },
        tweets: {
          background: '#ffffff',
          color: '#444444',
          links: '#1985b5'
        }
      },
      features: {
        scrollbar: true,
        loop: false,
        live: false,
        behavior: 'all'
      }
    }).render().start();